'use strict';

var cov_19znfksgx2 = function () {
    var path = 'D:\\WebStorm\\Jiyuan Mao\\OnlineLibrary\\routes\\comments.js',
        hash = '154f490acc247aba25ebfca3c3785e7ca3d7d4f5',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
        path: 'D:\\WebStorm\\Jiyuan Mao\\OnlineLibrary\\routes\\comments.js',
        statementMap: {
            '0': {
                start: {
                    line: 5,
                    column: 14
                },
                end: {
                    line: 5,
                    column: 32
                }
            },
            '1': {
                start: {
                    line: 6,
                    column: 13
                },
                end: {
                    line: 6,
                    column: 29
                }
            },
            '2': {
                start: {
                    line: 7,
                    column: 15
                },
                end: {
                    line: 7,
                    column: 34
                }
            },
            '3': {
                start: {
                    line: 8,
                    column: 14
                },
                end: {
                    line: 8,
                    column: 43
                }
            },
            '4': {
                start: {
                    line: 10,
                    column: 17
                },
                end: {
                    line: 10,
                    column: 84
                }
            },
            '5': {
                start: {
                    line: 13,
                    column: 0
                },
                end: {
                    line: 13,
                    column: 29
                }
            },
            '6': {
                start: {
                    line: 14,
                    column: 9
                },
                end: {
                    line: 14,
                    column: 28
                }
            },
            '7': {
                start: {
                    line: 16,
                    column: 0
                },
                end: {
                    line: 18,
                    column: 3
                }
            },
            '8': {
                start: {
                    line: 17,
                    column: 4
                },
                end: {
                    line: 17,
                    column: 65
                }
            },
            '9': {
                start: {
                    line: 20,
                    column: 0
                },
                end: {
                    line: 22,
                    column: 3
                }
            },
            '10': {
                start: {
                    line: 21,
                    column: 4
                },
                end: {
                    line: 21,
                    column: 65
                }
            },
            '11': {
                start: {
                    line: 24,
                    column: 0
                },
                end: {
                    line: 34,
                    column: 2
                }
            },
            '12': {
                start: {
                    line: 26,
                    column: 4
                },
                end: {
                    line: 26,
                    column: 54
                }
            },
            '13': {
                start: {
                    line: 27,
                    column: 4
                },
                end: {
                    line: 33,
                    column: 7
                }
            },
            '14': {
                start: {
                    line: 28,
                    column: 8
                },
                end: {
                    line: 32,
                    column: 53
                }
            },
            '15': {
                start: {
                    line: 29,
                    column: 12
                },
                end: {
                    line: 29,
                    column: 28
                }
            },
            '16': {
                start: {
                    line: 30,
                    column: 12
                },
                end: {
                    line: 30,
                    column: 54
                }
            },
            '17': {
                start: {
                    line: 32,
                    column: 12
                },
                end: {
                    line: 32,
                    column: 53
                }
            },
            '18': {
                start: {
                    line: 36,
                    column: 0
                },
                end: {
                    line: 52,
                    column: 2
                }
            },
            '19': {
                start: {
                    line: 38,
                    column: 4
                },
                end: {
                    line: 38,
                    column: 54
                }
            },
            '20': {
                start: {
                    line: 40,
                    column: 18
                },
                end: {
                    line: 40,
                    column: 31
                }
            },
            '21': {
                start: {
                    line: 42,
                    column: 4
                },
                end: {
                    line: 42,
                    column: 33
                }
            },
            '22': {
                start: {
                    line: 43,
                    column: 4
                },
                end: {
                    line: 43,
                    column: 41
                }
            },
            '23': {
                start: {
                    line: 44,
                    column: 4
                },
                end: {
                    line: 44,
                    column: 41
                }
            },
            '24': {
                start: {
                    line: 46,
                    column: 4
                },
                end: {
                    line: 51,
                    column: 7
                }
            },
            '25': {
                start: {
                    line: 47,
                    column: 8
                },
                end: {
                    line: 50,
                    column: 80
                }
            },
            '26': {
                start: {
                    line: 48,
                    column: 12
                },
                end: {
                    line: 48,
                    column: 71
                }
            },
            '27': {
                start: {
                    line: 50,
                    column: 12
                },
                end: {
                    line: 50,
                    column: 80
                }
            },
            '28': {
                start: {
                    line: 54,
                    column: 0
                },
                end: {
                    line: 64,
                    column: 2
                }
            },
            '29': {
                start: {
                    line: 56,
                    column: 4
                },
                end: {
                    line: 63,
                    column: 7
                }
            },
            '30': {
                start: {
                    line: 57,
                    column: 8
                },
                end: {
                    line: 62,
                    column: 9
                }
            },
            '31': {
                start: {
                    line: 58,
                    column: 12
                },
                end: {
                    line: 58,
                    column: 28
                }
            },
            '32': {
                start: {
                    line: 59,
                    column: 12
                },
                end: {
                    line: 59,
                    column: 69
                }
            },
            '33': {
                start: {
                    line: 61,
                    column: 12
                },
                end: {
                    line: 61,
                    column: 66
                }
            },
            '34': {
                start: {
                    line: 66,
                    column: 0
                },
                end: {
                    line: 91,
                    column: 2
                }
            },
            '35': {
                start: {
                    line: 67,
                    column: 4
                },
                end: {
                    line: 67,
                    column: 54
                }
            },
            '36': {
                start: {
                    line: 74,
                    column: 4
                },
                end: {
                    line: 89,
                    column: 7
                }
            },
            '37': {
                start: {
                    line: 75,
                    column: 8
                },
                end: {
                    line: 88,
                    column: 9
                }
            },
            '38': {
                start: {
                    line: 76,
                    column: 12
                },
                end: {
                    line: 76,
                    column: 28
                }
            },
            '39': {
                start: {
                    line: 77,
                    column: 12
                },
                end: {
                    line: 77,
                    column: 54
                }
            },
            '40': {
                start: {
                    line: 79,
                    column: 12
                },
                end: {
                    line: 79,
                    column: 41
                }
            },
            '41': {
                start: {
                    line: 80,
                    column: 12
                },
                end: {
                    line: 80,
                    column: 49
                }
            },
            '42': {
                start: {
                    line: 81,
                    column: 12
                },
                end: {
                    line: 81,
                    column: 49
                }
            },
            '43': {
                start: {
                    line: 82,
                    column: 12
                },
                end: {
                    line: 87,
                    column: 15
                }
            },
            '44': {
                start: {
                    line: 83,
                    column: 16
                },
                end: {
                    line: 86,
                    column: 86
                }
            },
            '45': {
                start: {
                    line: 84,
                    column: 20
                },
                end: {
                    line: 84,
                    column: 75
                }
            },
            '46': {
                start: {
                    line: 86,
                    column: 20
                },
                end: {
                    line: 86,
                    column: 86
                }
            },
            '47': {
                start: {
                    line: 93,
                    column: 0
                },
                end: {
                    line: 105,
                    column: 2
                }
            },
            '48': {
                start: {
                    line: 94,
                    column: 4
                },
                end: {
                    line: 94,
                    column: 54
                }
            },
            '49': {
                start: {
                    line: 95,
                    column: 18
                },
                end: {
                    line: 95,
                    column: 73
                }
            },
            '50': {
                start: {
                    line: 96,
                    column: 4
                },
                end: {
                    line: 104,
                    column: 7
                }
            },
            '51': {
                start: {
                    line: 97,
                    column: 8
                },
                end: {
                    line: 103,
                    column: 9
                }
            },
            '52': {
                start: {
                    line: 98,
                    column: 12
                },
                end: {
                    line: 98,
                    column: 28
                }
            },
            '53': {
                start: {
                    line: 99,
                    column: 12
                },
                end: {
                    line: 99,
                    column: 54
                }
            },
            '54': {
                start: {
                    line: 102,
                    column: 12
                },
                end: {
                    line: 102,
                    column: 53
                }
            },
            '55': {
                start: {
                    line: 107,
                    column: 0
                },
                end: {
                    line: 107,
                    column: 24
                }
            }
        },
        fnMap: {
            '0': {
                name: '(anonymous_0)',
                decl: {
                    start: {
                        line: 16,
                        column: 15
                    },
                    end: {
                        line: 16,
                        column: 16
                    }
                },
                loc: {
                    start: {
                        line: 16,
                        column: 30
                    },
                    end: {
                        line: 18,
                        column: 1
                    }
                },
                line: 16
            },
            '1': {
                name: '(anonymous_1)',
                decl: {
                    start: {
                        line: 20,
                        column: 16
                    },
                    end: {
                        line: 20,
                        column: 17
                    }
                },
                loc: {
                    start: {
                        line: 20,
                        column: 28
                    },
                    end: {
                        line: 22,
                        column: 1
                    }
                },
                line: 20
            },
            '2': {
                name: '(anonymous_2)',
                decl: {
                    start: {
                        line: 24,
                        column: 17
                    },
                    end: {
                        line: 24,
                        column: 18
                    }
                },
                loc: {
                    start: {
                        line: 24,
                        column: 31
                    },
                    end: {
                        line: 34,
                        column: 1
                    }
                },
                line: 24
            },
            '3': {
                name: '(anonymous_3)',
                decl: {
                    start: {
                        line: 27,
                        column: 54
                    },
                    end: {
                        line: 27,
                        column: 55
                    }
                },
                loc: {
                    start: {
                        line: 27,
                        column: 77
                    },
                    end: {
                        line: 33,
                        column: 5
                    }
                },
                line: 27
            },
            '4': {
                name: '(anonymous_4)',
                decl: {
                    start: {
                        line: 36,
                        column: 20
                    },
                    end: {
                        line: 36,
                        column: 21
                    }
                },
                loc: {
                    start: {
                        line: 36,
                        column: 34
                    },
                    end: {
                        line: 52,
                        column: 1
                    }
                },
                line: 36
            },
            '5': {
                name: '(anonymous_5)',
                decl: {
                    start: {
                        line: 46,
                        column: 17
                    },
                    end: {
                        line: 46,
                        column: 18
                    }
                },
                loc: {
                    start: {
                        line: 46,
                        column: 31
                    },
                    end: {
                        line: 51,
                        column: 5
                    }
                },
                line: 46
            },
            '6': {
                name: '(anonymous_6)',
                decl: {
                    start: {
                        line: 54,
                        column: 23
                    },
                    end: {
                        line: 54,
                        column: 24
                    }
                },
                loc: {
                    start: {
                        line: 54,
                        column: 37
                    },
                    end: {
                        line: 64,
                        column: 1
                    }
                },
                line: 54
            },
            '7': {
                name: '(anonymous_7)',
                decl: {
                    start: {
                        line: 56,
                        column: 45
                    },
                    end: {
                        line: 56,
                        column: 46
                    }
                },
                loc: {
                    start: {
                        line: 56,
                        column: 59
                    },
                    end: {
                        line: 63,
                        column: 5
                    }
                },
                line: 56
            },
            '8': {
                name: '(anonymous_8)',
                decl: {
                    start: {
                        line: 66,
                        column: 21
                    },
                    end: {
                        line: 66,
                        column: 22
                    }
                },
                loc: {
                    start: {
                        line: 66,
                        column: 35
                    },
                    end: {
                        line: 91,
                        column: 1
                    }
                },
                line: 66
            },
            '9': {
                name: '(anonymous_9)',
                decl: {
                    start: {
                        line: 74,
                        column: 36
                    },
                    end: {
                        line: 74,
                        column: 37
                    }
                },
                loc: {
                    start: {
                        line: 74,
                        column: 60
                    },
                    end: {
                        line: 89,
                        column: 5
                    }
                },
                line: 74
            },
            '10': {
                name: '(anonymous_10)',
                decl: {
                    start: {
                        line: 82,
                        column: 25
                    },
                    end: {
                        line: 82,
                        column: 26
                    }
                },
                loc: {
                    start: {
                        line: 82,
                        column: 35
                    },
                    end: {
                        line: 87,
                        column: 13
                    }
                },
                line: 82
            },
            '11': {
                name: '(anonymous_11)',
                decl: {
                    start: {
                        line: 93,
                        column: 22
                    },
                    end: {
                        line: 93,
                        column: 23
                    }
                },
                loc: {
                    start: {
                        line: 93,
                        column: 36
                    },
                    end: {
                        line: 105,
                        column: 1
                    }
                },
                line: 93
            },
            '12': {
                name: '(anonymous_12)',
                decl: {
                    start: {
                        line: 96,
                        column: 26
                    },
                    end: {
                        line: 96,
                        column: 27
                    }
                },
                loc: {
                    start: {
                        line: 96,
                        column: 50
                    },
                    end: {
                        line: 104,
                        column: 5
                    }
                },
                line: 96
            }
        },
        branchMap: {
            '0': {
                loc: {
                    start: {
                        line: 28,
                        column: 8
                    },
                    end: {
                        line: 32,
                        column: 53
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 28,
                        column: 8
                    },
                    end: {
                        line: 32,
                        column: 53
                    }
                }, {
                    start: {
                        line: 28,
                        column: 8
                    },
                    end: {
                        line: 32,
                        column: 53
                    }
                }],
                line: 28
            },
            '1': {
                loc: {
                    start: {
                        line: 47,
                        column: 8
                    },
                    end: {
                        line: 50,
                        column: 80
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 47,
                        column: 8
                    },
                    end: {
                        line: 50,
                        column: 80
                    }
                }, {
                    start: {
                        line: 47,
                        column: 8
                    },
                    end: {
                        line: 50,
                        column: 80
                    }
                }],
                line: 47
            },
            '2': {
                loc: {
                    start: {
                        line: 57,
                        column: 8
                    },
                    end: {
                        line: 62,
                        column: 9
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 57,
                        column: 8
                    },
                    end: {
                        line: 62,
                        column: 9
                    }
                }, {
                    start: {
                        line: 57,
                        column: 8
                    },
                    end: {
                        line: 62,
                        column: 9
                    }
                }],
                line: 57
            },
            '3': {
                loc: {
                    start: {
                        line: 75,
                        column: 8
                    },
                    end: {
                        line: 88,
                        column: 9
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 75,
                        column: 8
                    },
                    end: {
                        line: 88,
                        column: 9
                    }
                }, {
                    start: {
                        line: 75,
                        column: 8
                    },
                    end: {
                        line: 88,
                        column: 9
                    }
                }],
                line: 75
            },
            '4': {
                loc: {
                    start: {
                        line: 83,
                        column: 16
                    },
                    end: {
                        line: 86,
                        column: 86
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 83,
                        column: 16
                    },
                    end: {
                        line: 86,
                        column: 86
                    }
                }, {
                    start: {
                        line: 83,
                        column: 16
                    },
                    end: {
                        line: 86,
                        column: 86
                    }
                }],
                line: 83
            },
            '5': {
                loc: {
                    start: {
                        line: 97,
                        column: 8
                    },
                    end: {
                        line: 103,
                        column: 9
                    }
                },
                type: 'if',
                locations: [{
                    start: {
                        line: 97,
                        column: 8
                    },
                    end: {
                        line: 103,
                        column: 9
                    }
                }, {
                    start: {
                        line: 97,
                        column: 8
                    },
                    end: {
                        line: 103,
                        column: 9
                    }
                }],
                line: 97
            }
        },
        s: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0,
            '5': 0,
            '6': 0,
            '7': 0,
            '8': 0,
            '9': 0,
            '10': 0,
            '11': 0,
            '12': 0,
            '13': 0,
            '14': 0,
            '15': 0,
            '16': 0,
            '17': 0,
            '18': 0,
            '19': 0,
            '20': 0,
            '21': 0,
            '22': 0,
            '23': 0,
            '24': 0,
            '25': 0,
            '26': 0,
            '27': 0,
            '28': 0,
            '29': 0,
            '30': 0,
            '31': 0,
            '32': 0,
            '33': 0,
            '34': 0,
            '35': 0,
            '36': 0,
            '37': 0,
            '38': 0,
            '39': 0,
            '40': 0,
            '41': 0,
            '42': 0,
            '43': 0,
            '44': 0,
            '45': 0,
            '46': 0,
            '47': 0,
            '48': 0,
            '49': 0,
            '50': 0,
            '51': 0,
            '52': 0,
            '53': 0,
            '54': 0,
            '55': 0
        },
        f: {
            '0': 0,
            '1': 0,
            '2': 0,
            '3': 0,
            '4': 0,
            '5': 0,
            '6': 0,
            '7': 0,
            '8': 0,
            '9': 0,
            '10': 0,
            '11': 0,
            '12': 0
        },
        b: {
            '0': [0, 0],
            '1': [0, 0],
            '2': [0, 0],
            '3': [0, 0],
            '4': [0, 0],
            '5': [0, 0]
        },
        _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
        return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
}();

/*import Comment from '../models/comments';
import express from 'express';
let router = express.Router();*/

var express = (cov_19znfksgx2.s[0]++, require('express'));
var router = (cov_19znfksgx2.s[1]++, express.Router());
var mongoose = (cov_19znfksgx2.s[2]++, require('mongoose'));
var Comment = (cov_19znfksgx2.s[3]++, require('../models/comments'));

var mongodbUri = (cov_19znfksgx2.s[4]++, 'mongodb://jiyuan:qwert12345@ds151523.mlab.com:51523/onlinelibrary');
//var mongodbUri ='mongodb://booksdb:1997914mjy@ds125683.mlab.com:25683/onlinebooksdb';
//mongoose.connect('mongodb://localhost:27017/booksdb');
cov_19znfksgx2.s[5]++;
mongoose.connect(mongodbUri);
var db = (cov_19znfksgx2.s[6]++, mongoose.connection);

cov_19znfksgx2.s[7]++;
db.on('error', function (err) {
    cov_19znfksgx2.f[0]++;
    cov_19znfksgx2.s[8]++;

    console.log('Unable to Connect to [ ' + db.name + ' ]', err);
});

cov_19znfksgx2.s[9]++;
db.once('open', function () {
    cov_19znfksgx2.f[1]++;
    cov_19znfksgx2.s[10]++;

    console.log('Successfully Connected to [ ' + db.name + ' ]');
});

cov_19znfksgx2.s[11]++;
router.findOne = function (req, res) {
    cov_19znfksgx2.f[2]++;
    cov_19znfksgx2.s[12]++;


    res.setHeader('Content-Type', 'application/json');
    cov_19znfksgx2.s[13]++;
    Comment.find({ 'bookname': req.params.bookname }, function (err, comment) {
        cov_19znfksgx2.f[3]++;
        cov_19znfksgx2.s[14]++;

        if (comment.length <= 0) {
            cov_19znfksgx2.b[0][0]++;
            cov_19znfksgx2.s[15]++;

            res.status(404);
            cov_19znfksgx2.s[16]++;
            res.json({ message: 'Comment NOT Found!' });
        } else {
                cov_19znfksgx2.b[0][1]++;
                cov_19znfksgx2.s[17]++;

                res.send(JSON.stringify(comment, null, 5));
            }
    });
};

cov_19znfksgx2.s[18]++;
router.addComment = function (req, res) {
    cov_19znfksgx2.f[4]++;
    cov_19znfksgx2.s[19]++;


    res.setHeader('Content-Type', 'application/json');

    var comment = (cov_19znfksgx2.s[20]++, new Comment());

    cov_19znfksgx2.s[21]++;
    comment.text = req.body.text;
    cov_19znfksgx2.s[22]++;
    comment.username = req.body.username;
    cov_19znfksgx2.s[23]++;
    comment.bookname = req.body.bookname;

    cov_19znfksgx2.s[24]++;
    comment.save(function (err) {
        cov_19znfksgx2.f[5]++;
        cov_19znfksgx2.s[25]++;

        if (err) {
                cov_19znfksgx2.b[1][0]++;
                cov_19znfksgx2.s[26]++;

                res.json({ message: 'Comment NOT Added!', errmsg: err });
            } else {
                cov_19znfksgx2.b[1][1]++;
                cov_19znfksgx2.s[27]++;

                res.json({ message: 'Comment Successfully Added!', data: comment });
            }
    });
};

cov_19znfksgx2.s[28]++;
router.deleteComment = function (req, res) {
    cov_19znfksgx2.f[6]++;
    cov_19znfksgx2.s[29]++;


    Comment.findByIdAndRemove(req.params.id, function (err) {
        cov_19znfksgx2.f[7]++;
        cov_19znfksgx2.s[30]++;

        if (err) {
            cov_19znfksgx2.b[2][0]++;
            cov_19znfksgx2.s[31]++;

            res.status(404); //new
            cov_19znfksgx2.s[32]++;
            res.json({ message: 'Comment NOT DELETED!', errmsg: err });
        } else {
            cov_19znfksgx2.b[2][1]++;
            cov_19znfksgx2.s[33]++;

            res.json({ message: 'Comment Successfully Deleted!' });
        }
    });
};

cov_19znfksgx2.s[34]++;
router.editComment = function (req, res) {
    cov_19znfksgx2.f[8]++;
    cov_19znfksgx2.s[35]++;

    res.setHeader('Content-Type', 'application/json');

    /*var updatestr = {
        "text": req.body.text,
        "username": req.body.username,
        "bookname": req.body.bookname,
    }*/
    cov_19znfksgx2.s[36]++;
    Comment.findById(req.params.id, function (err, comment) {
        cov_19znfksgx2.f[9]++;
        cov_19znfksgx2.s[37]++;

        if (err) {
            cov_19znfksgx2.b[3][0]++;
            cov_19znfksgx2.s[38]++;

            res.status(404);
            cov_19znfksgx2.s[39]++;
            res.json({ message: 'Comment NOT Found!' });
        } else {
            cov_19znfksgx2.b[3][1]++;
            cov_19znfksgx2.s[40]++;

            comment.text = req.body.text;
            cov_19znfksgx2.s[41]++;
            comment.username = req.body.username;
            cov_19znfksgx2.s[42]++;
            comment.bookname = req.body.bookname;
            cov_19znfksgx2.s[43]++;
            comment.save(function () {
                cov_19znfksgx2.f[10]++;
                cov_19znfksgx2.s[44]++;

                if (err) {
                        cov_19znfksgx2.b[4][0]++;
                        cov_19znfksgx2.s[45]++;

                        res.json({ message: 'Comment NOT UpDated!', errmsg: err });
                    } else {
                        cov_19znfksgx2.b[4][1]++;
                        cov_19znfksgx2.s[46]++;

                        res.json({ message: 'Comment Successfully UpDated!', data: comment });
                    }
            });
        }
    });
};

cov_19znfksgx2.s[47]++;
router.searchByName = function (req, res) {
    cov_19znfksgx2.f[11]++;
    cov_19znfksgx2.s[48]++;

    res.setHeader('Content-Type', 'application/json');
    var keyword = (cov_19znfksgx2.s[49]++, { 'bookname': { $regex: req.params.bookname, $options: 'i' } });
    cov_19znfksgx2.s[50]++;
    Comment.find(keyword, function (err, comment) {
        cov_19znfksgx2.f[12]++;
        cov_19znfksgx2.s[51]++;

        if (comment.length <= 0) {
            cov_19znfksgx2.b[5][0]++;
            cov_19znfksgx2.s[52]++;

            res.status(404);
            cov_19znfksgx2.s[53]++;
            res.json({ message: 'Comment NOT Found!' });
        } else {
            cov_19znfksgx2.b[5][1]++;
            cov_19znfksgx2.s[54]++;


            res.send(JSON.stringify(comment, null, 5));
        }
    });
};

cov_19znfksgx2.s[55]++;
module.exports = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1lbnRzLmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwibW9uZ29vc2UiLCJDb21tZW50IiwibW9uZ29kYlVyaSIsImNvbm5lY3QiLCJkYiIsImNvbm5lY3Rpb24iLCJvbiIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJuYW1lIiwib25jZSIsImZpbmRPbmUiLCJyZXEiLCJyZXMiLCJzZXRIZWFkZXIiLCJmaW5kIiwicGFyYW1zIiwiYm9va25hbWUiLCJjb21tZW50IiwibGVuZ3RoIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsImFkZENvbW1lbnQiLCJ0ZXh0IiwiYm9keSIsInVzZXJuYW1lIiwic2F2ZSIsImVycm1zZyIsImRhdGEiLCJkZWxldGVDb21tZW50IiwiZmluZEJ5SWRBbmRSZW1vdmUiLCJpZCIsImVkaXRDb21tZW50IiwiZmluZEJ5SWQiLCJzZWFyY2hCeU5hbWUiLCJrZXl3b3JkIiwiJHJlZ2V4IiwiJG9wdGlvbnMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7OztBQUlBLElBQUlBLGtDQUFVQyxRQUFRLFNBQVIsQ0FBVixDQUFKO0FBQ0EsSUFBSUMsaUNBQVNGLFFBQVFHLE1BQVIsRUFBVCxDQUFKO0FBQ0EsSUFBSUMs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UCxHQUFzQixVQUFDMUIsR0FBRCxFQUFNQyxHQUFOLEVBQWM7QUFBQTtBQUFBOztBQUNoQ0EsUUFBSUMsU0FBSixDQUFjLGNBQWQsRUFBOEIsa0JBQTlCO0FBQ0EsUUFBSXlCLG1DQUFVLEVBQUMsWUFBWSxFQUFDQyxRQUFPNUIsSUFBSUksTUFBSixDQUFXQyxRQUFuQixFQUE0QndCLFVBQVMsR0FBckMsRUFBYixFQUFWLENBQUo7QUFGZ0M7QUFHaEN6QyxZQUFRZSxJQUFSLENBQWF3QixPQUFiLEVBQXNCLFVBQVVqQyxHQUFWLEVBQWVZLE9BQWYsRUFBd0I7QUFBQTtBQUFBOztBQUMxQyxZQUFJQSxRQUFRQyxNQUFSLElBQWtCLENBQXRCLEVBQXlCO0FBQUE7QUFBQTs7QUFDckJOLGdCQUFJTyxNQUFKLENBQVcsR0FBWDtBQURxQjtBQUVyQlAsZ0JBQUlRLElBQUosQ0FBUyxFQUFDQyxTQUFTLG9CQUFWLEVBQVQ7QUFDSCxTQUhELE1BR007QUFBQTtBQUFBOzs7QUFFRlQsZ0JBQUlVLElBQUosQ0FBU0MsS0FBS0MsU0FBTCxDQUFlUCxPQUFmLEVBQXVCLElBQXZCLEVBQTRCLENBQTVCLENBQVQ7QUFDSDtBQUNKLEtBUkQ7QUFTSCxDQVpEOzs7QUFjQXdCLE9BQU9DLE9BQVAsR0FBaUI5QyxNQUFqQiIsImZpbGUiOiJjb21tZW50cy5qcyIsInNvdXJjZVJvb3QiOiJEOi9XZWJTdG9ybS9KaXl1YW4gTWFvL09ubGluZUxpYnJhcnkvcm91dGVzIiwic291cmNlc0NvbnRlbnQiOlsiLyppbXBvcnQgQ29tbWVudCBmcm9tICcuLi9tb2RlbHMvY29tbWVudHMnO1xyXG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcclxubGV0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7Ki9cclxuXHJcbmxldCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG5sZXQgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxubGV0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcclxudmFyIENvbW1lbnQgPSByZXF1aXJlKCcuLi9tb2RlbHMvY29tbWVudHMnKTtcclxuXHJcbnZhciBtb25nb2RiVXJpID0gJ21vbmdvZGI6Ly9qaXl1YW46cXdlcnQxMjM0NUBkczE1MTUyMy5tbGFiLmNvbTo1MTUyMy9vbmxpbmVsaWJyYXJ5JztcclxuLy92YXIgbW9uZ29kYlVyaSA9J21vbmdvZGI6Ly9ib29rc2RiOjE5OTc5MTRtanlAZHMxMjU2ODMubWxhYi5jb206MjU2ODMvb25saW5lYm9va3NkYic7XHJcbi8vbW9uZ29vc2UuY29ubmVjdCgnbW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNy9ib29rc2RiJyk7XHJcbm1vbmdvb3NlLmNvbm5lY3QobW9uZ29kYlVyaSk7XHJcbmxldCBkYiA9IG1vbmdvb3NlLmNvbm5lY3Rpb247XHJcblxyXG5kYi5vbignZXJyb3InLCBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmxvZygnVW5hYmxlIHRvIENvbm5lY3QgdG8gWyAnICsgZGIubmFtZSArICcgXScsIGVycik7XHJcbn0pO1xyXG5cclxuZGIub25jZSgnb3BlbicsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgQ29ubmVjdGVkIHRvIFsgJyArIGRiLm5hbWUgKyAnIF0nKTtcclxufSk7XHJcblxyXG5yb3V0ZXIuZmluZE9uZSA9IChyZXEsIHJlcykgPT4ge1xyXG5cclxuICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgICBDb21tZW50LmZpbmQoeyAnYm9va25hbWUnIDogcmVxLnBhcmFtcy5ib29rbmFtZSB9LGZ1bmN0aW9uKGVyciwgY29tbWVudCkge1xyXG4gICAgICAgIGlmIChjb21tZW50Lmxlbmd0aCA8PTApIHtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpO1xyXG4gICAgICAgICAgICByZXMuanNvbih7bWVzc2FnZTogJ0NvbW1lbnQgTk9UIEZvdW5kISd9KTtcclxuICAgICAgICB9ZWxzZVxyXG4gICAgICAgICAgICByZXMuc2VuZChKU09OLnN0cmluZ2lmeShjb21tZW50LG51bGwsNSkpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5yb3V0ZXIuYWRkQ29tbWVudCA9IChyZXEsIHJlcykgPT4ge1xyXG5cclxuICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XHJcblxyXG4gICAgdmFyIGNvbW1lbnQgPSBuZXcgQ29tbWVudCgpO1xyXG5cclxuICAgIGNvbW1lbnQudGV4dCA9IHJlcS5ib2R5LnRleHQ7XHJcbiAgICBjb21tZW50LnVzZXJuYW1lID0gcmVxLmJvZHkudXNlcm5hbWU7XHJcbiAgICBjb21tZW50LmJvb2tuYW1lID0gcmVxLmJvZHkuYm9va25hbWU7XHJcblxyXG4gICAgY29tbWVudC5zYXZlKGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIGlmIChlcnIpXHJcbiAgICAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ0NvbW1lbnQgTk9UIEFkZGVkIScsIGVycm1zZyA6IGVyciB9ICk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdDb21tZW50IFN1Y2Nlc3NmdWxseSBBZGRlZCEnLCBkYXRhOiBjb21tZW50IH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5yb3V0ZXIuZGVsZXRlQ29tbWVudCA9IChyZXEsIHJlcykgPT4ge1xyXG5cclxuICAgIENvbW1lbnQuZmluZEJ5SWRBbmRSZW1vdmUocmVxLnBhcmFtcy5pZCwgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwNCk7ICAvL25ld1xyXG4gICAgICAgICAgICByZXMuanNvbih7bWVzc2FnZTogJ0NvbW1lbnQgTk9UIERFTEVURUQhJywgZXJybXNnOiBlcnJ9KTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmVzLmpzb24oeyBtZXNzYWdlOiAnQ29tbWVudCBTdWNjZXNzZnVsbHkgRGVsZXRlZCEnfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5yb3V0ZXIuZWRpdENvbW1lbnQgPSAocmVxLCByZXMpID0+IHtcclxuICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XHJcblxyXG4gICAgLyp2YXIgdXBkYXRlc3RyID0ge1xyXG4gICAgICAgIFwidGV4dFwiOiByZXEuYm9keS50ZXh0LFxyXG4gICAgICAgIFwidXNlcm5hbWVcIjogcmVxLmJvZHkudXNlcm5hbWUsXHJcbiAgICAgICAgXCJib29rbmFtZVwiOiByZXEuYm9keS5ib29rbmFtZSxcclxuICAgIH0qL1xyXG4gICAgQ29tbWVudC5maW5kQnlJZChyZXEucGFyYW1zLmlkLCBmdW5jdGlvbiAoZXJyLCBjb21tZW50KSB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDQwNCk7XHJcbiAgICAgICAgICAgIHJlcy5qc29uKHttZXNzYWdlOiAnQ29tbWVudCBOT1QgRm91bmQhJ30pO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgY29tbWVudC50ZXh0ID0gcmVxLmJvZHkudGV4dDtcclxuICAgICAgICAgICAgY29tbWVudC51c2VybmFtZSA9IHJlcS5ib2R5LnVzZXJuYW1lO1xyXG4gICAgICAgICAgICBjb21tZW50LmJvb2tuYW1lID0gcmVxLmJvZHkuYm9va25hbWU7XHJcbiAgICAgICAgICAgIGNvbW1lbnQuc2F2ZShmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgaWYoZXJyKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5qc29uKHttZXNzYWdlOiAnQ29tbWVudCBOT1QgVXBEYXRlZCEnLGVycm1zZzplcnJ9KTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICByZXMuanNvbih7bWVzc2FnZTogJ0NvbW1lbnQgU3VjY2Vzc2Z1bGx5IFVwRGF0ZWQhJyxkYXRhOmNvbW1lbnR9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG59O1xyXG5cclxucm91dGVyLnNlYXJjaEJ5TmFtZSA9IChyZXEsIHJlcykgPT4ge1xyXG4gICAgcmVzLnNldEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcclxuICAgIHZhciBrZXl3b3JkID0geydib29rbmFtZSc6IHskcmVnZXg6cmVxLnBhcmFtcy5ib29rbmFtZSwkb3B0aW9uczonaSd9fTtcclxuICAgIENvbW1lbnQuZmluZChrZXl3b3JkLCBmdW5jdGlvbiAoZXJyLCBjb21tZW50KSB7XHJcbiAgICAgICAgaWYgKGNvbW1lbnQubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDQpO1xyXG4gICAgICAgICAgICByZXMuanNvbih7bWVzc2FnZTogJ0NvbW1lbnQgTk9UIEZvdW5kISd9KTtcclxuICAgICAgICB9ZWxzZSB7XHJcblxyXG4gICAgICAgICAgICByZXMuc2VuZChKU09OLnN0cmluZ2lmeShjb21tZW50LG51bGwsNSkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XHJcbiJdfQ==